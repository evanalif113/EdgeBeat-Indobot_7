<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edgebeat</title>
    <!-- Favicon -->
    <link rel="icon" href="./img/logo.png" type="image/x-icon">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-sm navbar-light bg-light sticky-top">
    <div class="container-fluid">
        
        <!--Logo NavBar-->
        <a class="navbar-brand mx-auto d-flex align-items-center" href="./index.html">
            <img src="./img/logo.png" alt="Edgebeat Logo" style="height: 40px" class="d-inline-block align-text-top">
            <span class="ms-2">Edgebeat</span>
        </a>

         <!-- Toggler untuk tampilan mobile -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="nav ms-auto me-4">
                <li class="nav-item">
                    <a class="nav-link active"  href="./index.html">Beranda</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./fitur.html">Fitur</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./tim.html">Tim Kami</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link btn btn-success" href="#register">Daftar</a>
                </li>
            </ul>
        </div>

        <button class="btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebar" aria-controls="sidebar">
            <span class="navbar-toggler-icon"></span>
        </button>

    </div>
</nav>

<!-- Sidebar -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="sidebar" aria-labelledby="sidebarLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="sidebarLabel">Edgebeat</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link active" href="./index.html">Beranda</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="./data.html">Data</a>
            </li>
            <li class="nav-item">
                <a class="btn btn-primary" href="#register">Login</a>
            </li>
        </ul>
    </div>
</div>

    <!-- Header -->
    <header class="bg-primary text-white text-center py-5">
    </header>

    <!-- Main Content -->
    <div class="container mt-5">
        <h2>Data User</h2>
        <table class="table table-bordered" id="data-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nama</th>
                    <th>Umur</th>
                    <th>Gender</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be inserted here -->
            </tbody>
        </table>
    </div>

    <!-- Modal Sukses -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">Berhasil</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Data berhasil dikirim!
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Error -->
    <div class="modal fade" id="errorModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">Error</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Terjadi kesalahan saat mengirim data. Silakan coba lagi.
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
        <div class="toast-container position-fixed bottom-0 end-0 p-3">
            <div id="recording-toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <strong class="me-auto">Status Rekaman</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body">
                    <!-- Pesan toast akan ditampilkan di sini -->
                </div>
            </div>
        </div>

    <!-- Firebase Configuration -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getDatabase, ref, child, push, set , get, query, orderByKey, limitToLast} from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA-GgbbQkIOWRJ2nYgGkYTq8EaN4h1R2HQ",
            authDomain: "edgebeat-indobot7.firebaseapp.com",
            databaseURL: "https://edgebeat-indobot7-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "edgebeat-indobot7",
            storageBucket: "edgebeat-indobot7.firebasestorage.app",
            messagingSenderId: "407937371870",
            appId: "1:407937371870:web:4ed6c579d62b283a587c4f",
            measurementId: "G-Y4MZVWEJ2K"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

            // Function to fetch data from Firebase and display in table
            async function fetchData() {
            const dbRef = ref(database);
            //Data Register
            const snapshotReg = await get(child(dbRef, `/pendaftaran`));
            //Data Rekam
            const snapshotRek = await get(child(dbRef, `/rekaman`));
            if (snapshotReg.exists()) {
                const dataReg = snapshotReg.val();
                const tableBody = document.getElementById('data-table').getElementsByTagName('tbody')[0];
                tableBody.innerHTML = ''; // Clear existing data
                for (const key in dataReg) {
                    if (dataReg.hasOwnProperty(key)) {
                        const row = tableBody.insertRow();
                        const cell1 = row.insertCell(0);
                        const cell2 = row.insertCell(1);
                        const cell3 = row.insertCell(2);
                        const cell4 = row.insertCell(3);
                        cell1.textContent = dataReg[key].id;
                        cell2.textContent = dataReg[key].nama;
                        cell3.textContent = dataReg[key].umur;
                        cell4.textContent = dataReg[key].gender;
                    }
                }
            } else {
                console.log("No data available");
            }
        }

        // Fetch data on page load
        window.onload = fetchData;
    </script>

    <!-- Footer -->
    <footer class="bg-light py-4">
        <div class="container text-center">
            <p class="mb-0">&copy; 2024 Edgebeat. Hak Cipta Dilindungi Undang-undang.</p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</body>
</html>
